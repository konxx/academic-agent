academic-agent/
├── .env                       # [安全] 存放 API Keys (OpenAI, Tavily, Qdrant)
├── .gitignore
├── pyproject.toml             # 依赖管理 (替代 requirements.txt)
├── app.py                     # Streamlit 启动入口 (只负责导航，不写逻辑)
│
├── config/                    # [配置中心]
│   ├── __init__.py
│   ├── settings.py            # 使用 Pydantic 加载环境变量，提供全局 Config 对象
│   └── prompts/               # [Prompt 仓库]
│       ├── ingestion.yaml     # 定义提取元数据、搜索关键词的 Prompts
│       └── research.yaml      # 定义综述撰写、反思批评的 Prompts
│
├── core/                      # [能力层] 封装底层工具，不含业务流程
│   ├── __init__.py
│   ├── llm.py                 # LLM 工厂 (支持切换 OpenAI/Ollama)
│   ├── pdf_loader.py          # PDF 读取与清洗
│   ├── qdrant.py              # 向量库的增删改查封装
│   ├── search.py              # 联网搜索 (Tavily/DuckDuckGo)
│   └── text_splitter.py       # 文本切块逻辑
│
├── graph/                     # [大脑层] LangGraph 核心逻辑
│   ├── __init__.py
│   │
│   ├── ingestion/             # 子图1：知识入库流程
│   │   ├── __init__.py
│   │   ├── state.py           # IngestionState (PDF路径, Metadata, 缺失字段)
│   │   ├── nodes.py           # 提取Node, 补全Node, 入库Node
│   │   ├── workflow.py        # 构建并编译 ingestion_app
│   │
│   └── research/              # 子图2：综述研究流程
│       ├── __init__.py
│       ├── state.py           # ResearchState (Query, Context, Draft, Critique)
│       ├── nodes.py           # Router, Retriever, Writer, Reviewer
│       ├── workflow.py        # 构建并编译 research_app
│
├── ui/                        # [交互层] Streamlit 界面
│   ├── __init__.py
│   ├── components/            # 可复用组件
│   │   ├── pdf_uploader.py
│   │   ├── chat_interface.py
│   │   └── state_visualizer.py # 可视化 Graph 的运行状态
│   │
│   └── pages/
│       ├── 1_Knowledge_Base.py # 调用 graph.ingestion
│       └── 2_Deep_Research.py  # 调用 graph.research
│
├── data/                      # [数据层]
│   ├── uploads/               # 临时 PDF 存储
│   └── qdrant_local/          # (如果本地运行) 向量库文件
│
├── utils/                     # [通用工具]
│   ├── logger.py              # 统一日志格式
│   └── helpers.py             # 通用辅助函数
│
└── tests/                     # [测试]
    ├── test_ingestion_graph.py
    └── test_research_graph.py